{"version":3,"file":"ngld-icon.js","sources":["../../src/lib/svg-icon-registry.service.ts","../../src/lib/icon.component.ts","../../src/lib/svg-icon.module.ts","../../src/public-api.ts","../../src/ngld-icon.ts"],"names":[],"mappings":"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","sourcesContent":["import { ErrorHandler, Inject, Injectable, InjectionToken, Optional, ValueProvider } from '@angular/core';\nimport { DOCUMENT } from '@angular/common';\nimport { HttpClient } from '@angular/common/http';\nimport { MatIconRegistry } from '@angular/material/icon';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { Observable, of } from 'rxjs';\n\nexport const SVG_ICONS = new InjectionToken<Array<SvgIconInfo>>('SvgIcons');\n\nexport interface SvgIconInfoProvider extends ValueProvider {\n  useValue: SvgIconInfo;\n}\n\nexport interface SvgIconInfo {\n  namespace?: string;\n  name: string;\n  svgSource: string;\n}\n\ninterface SvgIconMap {\n  [namespace: string]: {\n    [iconName: string]: SVGElement;\n  };\n}\n\n/**\n * An exception to be thrown when the consumer attempts to use `<ngld-icon>`\n * without including @angular/common/http.\n */\nexport class SvgIconNoHttpProviderError extends Error {\n\n  constructor() {\n    super('Could not find HttpClient provider for use with Angular Material icons.'\n      + 'Please include the HttpClientModule from @angular/common/http in your '\n      + 'app imports.');\n  }\n}\n\nconst DEFAULT_NS = '$$default';\n\n/**\n * https://github.com/angular/angular/blob/f8096d499324cf0961f092944bbaedd05364eea1/aio/src/app/shared/custom-icon-registry.ts\n */\n@Injectable({ providedIn: 'root' })\nexport class SvgIconRegistry extends MatIconRegistry {\n\n  private cachedSvgElements: SvgIconMap = { [DEFAULT_NS]: {} };\n\n  constructor(\n    @Optional() private http: HttpClient,\n    sanitizer: DomSanitizer,\n    @Optional() @Inject(DOCUMENT) document: any,\n    errorHandler: ErrorHandler,\n    @Optional() @Inject(SVG_ICONS) private svgIcons: SvgIconInfo[],\n  ) {\n    super(http, sanitizer, document, errorHandler);\n    if (svgIcons == null) {\n      this.svgIcons = [];\n    }\n  }\n\n  /**\n   * Returns an Observable that produces the icon (as an `<svg>` DOM element)\n   * with the given name and namespace.\n   * The icon must have been previously registered with addIcon or addIconSet;\n   * if not, the observable will throw an error.\n   */\n  public getNamedSvgIcon(iconName: string, namespace?: string): Observable<SVGElement> {\n    if (!this.http) {\n      throw new SvgIconNoHttpProviderError();\n    }\n    const nsIconMap = this.cachedSvgElements[namespace || DEFAULT_NS];\n    let preloadedElement: SVGElement | undefined = nsIconMap && nsIconMap[iconName];\n    if (!preloadedElement) {\n      preloadedElement = this.loadSvgElement(iconName, namespace);\n    }\n    return preloadedElement\n      ? of(preloadedElement.cloneNode(true) as SVGElement)\n      : super.getNamedSvgIcon(iconName, namespace);\n\n  }\n\n  private loadSvgElement(iconName: string, namespace?: string): SVGElement | undefined {\n    const svgIcon = this.svgIcons.find(icon => {\n      return namespace\n        ? icon.name === iconName && icon.namespace === namespace\n        : icon.name === iconName;\n    });\n    if (!svgIcon) {\n      return;\n    }\n\n    const ns = svgIcon.namespace || DEFAULT_NS;\n    const nsIconMap = this.cachedSvgElements[ns] || (this.cachedSvgElements[ns] = {});\n\n    // Creating a new `<div>` per icon is necessary for the SVGs to work correctly in IE11.\n    const div = document.createElement('DIV');\n\n    // SECURITY: the source for the SVG icons is provided in code by trusted developers\n    div.innerHTML = svgIcon.svgSource;\n\n    const svgElement = div.querySelector('svg');\n    nsIconMap[svgIcon.name] = svgElement;\n\n    return svgElement;\n  }\n}\n","import { Attribute, Component, ElementRef, ErrorHandler, Inject, Input, OnChanges, OnDestroy, OnInit, SimpleChanges } from '@angular/core';\nimport { MatIconLocation, MAT_ICON_LOCATION } from '@angular/material/icon';\nimport { Subscription } from 'rxjs';\nimport { take } from 'rxjs/operators';\nimport { SvgIconRegistry } from './svg-icon-registry.service';\n\n/** SVG attributes that accept a FuncIRI (e.g. `url(<something>)`). */\nconst funcIriAttributes = [\n  'clip-path',\n  'color-profile',\n  'src',\n  'cursor',\n  'fill',\n  'filter',\n  'marker',\n  'marker-start',\n  'marker-mid',\n  'marker-end',\n  'mask',\n  'stroke'\n];\n\n/** Selector that can be used to find all elements that are using a `FuncIRI`. */\nconst funcIriAttributeSelector = funcIriAttributes.map(attr => `[${attr}]`).join(', ');\n\n/** Regex that can be used to extract the id out of a FuncIRI. */\nconst funcIriPattern = /^url\\(['\"]?#(.*?)['\"]?\\)$/;\n\n/**\n * ngld-icon component\n * Greatly inspired by @angular/material icon component:\n * https://github.com/angular/components/blob/master/src/material/icon/icon.ts\n */\n@Component({\n  selector: 'g[ngld-icon]',\n  template: '<svg><text> Empty Icon </text></svg>',\n})\nexport class IconComponent implements OnChanges, OnDestroy {\n\n  @Input() svgIcon: string;\n\n  private svgName: string | null;\n  private svgNamespace: string | null;\n\n  private elementsWithExternalReferences?: Map<Element, { name: string, value: string }[]>;\n\n  /**\n   * Subscription to the current in-progress SVG icon request.\n   */\n  private currentIconFetch = Subscription.EMPTY;\n\n  constructor(\n    private elementRef: ElementRef<SVGGElement>,\n    private iconRegistry: SvgIconRegistry,\n    @Attribute('aria-hidden') ariaHidden: string,\n    @Inject(MAT_ICON_LOCATION) private location: MatIconLocation,\n    private readonly errorHandler: ErrorHandler,\n  ) {\n    this.svgIcon = 'expand_node';\n    // If the user has not explicitly set aria-hidden, mark the icon as hidden,\n    // as this is the right thing to do for the majority of icon use-cases.\n    if (!ariaHidden) {\n      elementRef.nativeElement.setAttribute('aria-hidden', 'true');\n    }\n  }\n\n  /**\n   * the value given on svgIcon property is obtained from SimpleChanges event.\n   */\n  ngOnChanges(changes: SimpleChanges & { svgIcon?: string, previousValue?: string }): void {\n    // Only update the inline SVG icon if the inputs changed,\n    // to avoid unnecessary DOM operations.\n\n    const svgIconChanges = changes.svgIcon;\n\n    this.svgNamespace = null;\n    this.svgName = null;\n    if (svgIconChanges) {\n      this.currentIconFetch.unsubscribe();\n      if (this.svgIcon) {\n        const [namespace, iconName] = this.splitIconName(this.svgIcon);\n        if (namespace) {\n          this.svgNamespace = namespace;\n        }\n        if (iconName) {\n          this.svgName = iconName;\n        }\n\n        this.currentIconFetch = this.iconRegistry.getNamedSvgIcon(iconName, namespace)\n          .pipe(take(1))\n          .subscribe(svg => this.setSvgElement(svg), (err: Error) => {\n            const errorMessage = `Error retrieving icon ${namespace}:${iconName} ! ${err.message}`;\n            this.errorHandler.handleError(new Error(errorMessage));\n          });\n      } else if (changes.previousValue) {\n        this.clearSvgElement();\n      }\n    }\n    // updateFontIconClasses when usingFontIcon\n  }\n\n  ngOnDestroy(): void {\n    this.currentIconFetch.unsubscribe();\n    if (this.elementsWithExternalReferences) {\n      this.elementsWithExternalReferences.clear();\n    }\n  }\n\n  private splitIconName(iconName: string): [string, string] {\n    if (!iconName) {\n      return ['', ''];\n    }\n    const parts = iconName.split(':');\n    switch (parts.length) {\n      case 1:\n        return ['', parts[0]]; // Use default namespace.\n      case 2:\n        return parts as [string, string];\n      default:\n        throw Error(`Invalid icon name: \"${iconName}\"`);\n    }\n  }\n\n  private setSvgElement(svg: SVGElement): void {\n    this.clearSvgElement();\n    // Workaround for IE11 and Edge ignoring `style` tags inside dynamically-created SVGs.\n    // See: https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/10898469/\n    // Do this before inserting the element into the DOM,\n    // in order to avoid a style recalculation.\n\n    const styleTags = svg.querySelectorAll('style');\n    styleTags.forEach(styleTag => styleTag.textContent += ' ');\n\n    // Note: we do this fix here, rather than the icon registry,\n    // because the references have to point to the URL at the time\n    // that the icon was created.\n    const path = this.location.getPathname();\n    this.cacheChildrenWithExternalReferences(svg);\n    this.elementRef.nativeElement.appendChild(svg);\n  }\n\n  private clearSvgElement(): void {\n    const layoutElement: SVGGElement = this.elementRef.nativeElement;\n    let childCount = layoutElement.childNodes.length;\n    if (this.elementsWithExternalReferences) {\n      this.elementsWithExternalReferences.clear();\n    }\n\n    // Remove existing non-element child nodes and SVGs,\n    // and add the new SVG element. Note that we can't use innerHTML,\n    // because IE will throw if the element has a data binding.\n    // --> I'm not caring IE at present...\n    while (childCount--) {\n      const child = layoutElement.childNodes[childCount];\n      // 1 corresponds to Node.ELEMENT_NODE.\n      // We remove all non-element nodes in order to get rid of any loose text nodes,\n      // as well as any SVG elements in order to remove any old icons.\n      if (child.nodeType !== 1 || child.nodeName.toLowerCase() === 'svg') {\n        layoutElement.removeChild(child);\n      }\n    }\n  }\n\n  /**\n   * Caches the children of an SVG element that have `url()`\n   * references that we need to prefix with the current path.\n   */\n  private cacheChildrenWithExternalReferences(element: SVGElement): void {\n    const elementsWithFuncIri = element.querySelectorAll(funcIriAttributeSelector);\n    const elements = this.elementsWithExternalReferences\n      = this.elementsWithExternalReferences || new Map();\n    elementsWithFuncIri.forEach(elementWithReference => {\n      funcIriAttributes.forEach(attr => {\n        const value = elementWithReference.getAttribute(attr);\n        const match = value ? value.match(funcIriPattern) : null;\n\n        if (match) {\n          let attributes = elements.get(elementWithReference);\n          if (!attributes) {\n            attributes = [];\n            elements.set(elementWithReference, attributes);\n          }\n\n          attributes.push({ name: attr, value: match[1] });\n        }\n      });\n    });\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { IconComponent } from './icon.component';\n\n\n@NgModule({\n  declarations: [IconComponent],\n  imports: [],\n  exports: [IconComponent]\n})\nexport class SvgIconModule { }\n","/*\n * Public API Surface of icon\n */\n\nexport * from './lib/icon.component';\nexport * from './lib/svg-icon.module';\nexport * from './lib/svg-icon-registry.service';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"]}