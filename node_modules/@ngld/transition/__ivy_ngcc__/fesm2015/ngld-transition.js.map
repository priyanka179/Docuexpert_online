{"version":3,"file":"ngld-transition.js","sources":["../../src/lib/easing.function.ts","../../src/lib/transition.service.ts","../../src/lib/transition.class.ts","../../src/lib/trigger.class.ts","../../src/lib/transition.meta-def.ts","../../src/public-api.ts","../../src/ngld-transition.ts"],"names":[],"mappings":"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","sourcesContent":["export type EasingFunc = (t: number) => number;\n\n/**\n * No easing, no acceleration\n */\nexport function linear(t: number): number {\n  return t;\n}\n\n/**\n * Accelerating from zero velocity\n */\nexport function easeInQuad(t: number): number {\n  return t * t;\n}\n\n/**\n * Decelerating to zero velocity\n */\nexport function easeOutQuad(t: number): number {\n  return t * (2 - t);\n}\n\n/**\n * Acceleration until halfway, then deceleration\n */\nexport function easeInOutQuad(t: number): number {\n  return t < .5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n}\n\n/**\n * Accelerating from zero velocity\n */\nexport function easeInCubic(t: number): number {\n  return t * t * t;\n}\n\n/**\n * Decelerating to zero velocity\n */\nexport function easeOutCubic(t: number): number {\n  return (--t) * t * t + 1;\n}\n\n/**\n * Acceleration until halfway, then deceleration\n */\nexport function easeInOutCubic(t: number): number {\n  return t < .5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\n}\n\n/**\n * Accelerating from zero velocity\n */\nexport function easeInQuart(t: number): number {\n  return t * t * t * t;\n}\n\n/**\n * Decelerating to zero velocity\n */\nexport function easeOutQuart(t: number): number {\n  return 1 - (--t) * t * t * t;\n}\n\n/**\n * Acceleration until halfway, then deceleration\n */\nexport function easeInOutQuart(t: number): number {\n  return t < .5 ? 8 * t * t * t * t : 1 - 8 * (--t) * t * t * t;\n}\n\n/**\n * Accelerating from zero velocity\n */\nexport function easeInQuint(t: number): number {\n  return t * t * t * t * t;\n}\n\n/**\n * Decelerating to zero velocity\n */\nexport function easeOutQuint(t: number): number {\n  return 1 + (--t) * t * t * t * t;\n}\n\n/**\n * Acceleration until halfway, then deceleration\n */\nexport function easeInOutQuint(t: number): number {\n  return t < .5 ? 16 * t * t * t * t * t : 1 + 16 * (--t) * t * t * t * t;\n}\n","import { Injectable, Optional } from '@angular/core';\nimport { Trigger } from './trigger.class';\n\nexport class InvalidTriggerRegisterError extends Error {\n\n  constructor() {\n    super('Could not find triggers registered in the transition.');\n  }\n}\n\n@Injectable()\nexport class TransitionService {\n\n  constructor(\n    @Optional() public triggers: Trigger[],\n  ) { }\n\n  /**\n   * animate\n   */\n  public async animate(triggerName: string, from: string, to: string, param: any): Promise<any> {\n    if (!Array.isArray(this.triggers)) {\n      return Promise.reject(new InvalidTriggerRegisterError());\n    }\n    const trigger = this.triggers.find(trig => trig.name === triggerName);\n    if (!trigger) {\n      console.warn(`Trigger ${triggerName} is not defined.`);\n      return Promise.resolve();\n    }\n    const transition = trigger.transitions.find(trans => trans.validate(from, to));\n    if (!transition) {\n      console.warn(`Transition ${from} => ${to} is not defined`);\n      return Promise.resolve();\n    }\n    if (!requestAnimationFrame) {\n      // requestAnimationFrame API is not available in current browser.\n      // https://developer.mozilla.org/en-US/docs/Web/API/window/requestAnimationFrame\n      transition.steps.forEach(step => step(1, param));\n      return Promise.resolve();\n    }\n    return Promise.all(transition.steps.map(render => new Promise((resolve) => {\n      const start = Date.now();\n      (function loop(): void {\n        const p = (Date.now() - start) / transition.duration;\n        if (p > 1) {\n          render(1, param);\n          resolve(render);\n        } else {\n          requestAnimationFrame(loop);\n          render(transition.easing(p), param);\n        }\n      })();\n    })));\n  }\n}\n","import { EasingFunc, RenderState } from './types';\n\nexport class Transition {\n\n  public steps: RenderState<any>[] = [];\n  public duration = 1;\n  public easing: EasingFunc = () => null;\n\n  constructor(\n    public validate: ((fromtState: string, toState: string) => boolean),\n  ) { }\n}\n","import { Transition } from './transition.class';\n\nexport class Trigger {\n\n  public transitions: Transition[] = [];\n\n  constructor(\n    public name: string) {\n  }\n}\n","import { Transition } from './transition.class';\nimport { RenderState, EasingFunc } from './types';\nimport { Trigger } from './trigger.class';\n\ntype AnimationMetadata = (trig: Trigger) => void;\ntype TransitionMetadata = (transition: Transition) => void;\n\nexport function trigger(name: string, definition: AnimationMetadata[]): Trigger {\n  const result = new Trigger(name);\n  definition.forEach(def => def(result));\n  return result;\n}\n\nexport function transition(\n  stateChangeExpr: ((fromtState: string, toState: string) => boolean),\n  steps: TransitionMetadata[]): AnimationMetadata {\n  const transResult = new Transition(stateChangeExpr);\n  steps.forEach(stepDef => stepDef(transResult));\n  return (trig: Trigger) => {\n    trig.transitions.push(transResult);\n  };\n}\n\nexport function render<T>(state: RenderState<T>): TransitionMetadata {\n  return (trans: Transition) => {\n    trans.steps.push(state);\n  };\n}\n\nexport function animate(duration: number, easing: EasingFunc): TransitionMetadata {\n  return (trans: Transition) => {\n    trans.duration = duration;\n    trans.easing = easing;\n  };\n}\n","/*\n * Public API Surface of transition\n */\nimport * as Easing from './lib/easing.function';\n\nexport * from './lib/transition.service';\n// export * from './lib/transition.module';\nexport * from './lib/transition.meta-def';\nexport { Easing };\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n\nexport {Trigger as ɵa} from './lib/trigger.class';"]}