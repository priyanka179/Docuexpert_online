{"ast":null,"code":"// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\n\n/**\n * Detects where the continuation token is and returns it. Notice that azure-asyncoperation\n * must be checked first before the other location headers because there are scenarios\n * where both azure-asyncoperation and location could be present in the same response but\n * azure-asyncoperation should be the one to use for polling.\n */\nexport function getPollingUrl(rawResponse, defaultPath) {\n  var _a, _b, _c;\n\n  return (_c = (_b = (_a = getAzureAsyncOperation(rawResponse)) !== null && _a !== void 0 ? _a : getLocation(rawResponse)) !== null && _b !== void 0 ? _b : getOperationLocation(rawResponse)) !== null && _c !== void 0 ? _c : defaultPath;\n}\n\nfunction getLocation(rawResponse) {\n  return rawResponse.headers[\"location\"];\n}\n\nfunction getOperationLocation(rawResponse) {\n  return rawResponse.headers[\"operation-location\"];\n}\n\nfunction getAzureAsyncOperation(rawResponse) {\n  return rawResponse.headers[\"azure-asyncoperation\"];\n}\n\nexport function inferLroMode(requestPath, requestMethod, rawResponse) {\n  if (getAzureAsyncOperation(rawResponse) !== undefined) {\n    return {\n      mode: \"AzureAsync\",\n      resourceLocation: requestMethod === \"PUT\" ? requestPath : requestMethod === \"POST\" ? getLocation(rawResponse) : undefined\n    };\n  } else if (getLocation(rawResponse) !== undefined || getOperationLocation(rawResponse) !== undefined) {\n    return {\n      mode: \"Location\"\n    };\n  } else if ([\"PUT\", \"PATCH\"].includes(requestMethod)) {\n    return {\n      mode: \"Body\"\n    };\n  }\n\n  return {};\n}\n\nclass SimpleRestError extends Error {\n  constructor(message, statusCode) {\n    super(message);\n    this.name = \"RestError\";\n    this.statusCode = statusCode;\n    Object.setPrototypeOf(this, SimpleRestError.prototype);\n  }\n\n}\n\nexport function isUnexpectedInitialResponse(rawResponse) {\n  const code = rawResponse.statusCode;\n\n  if (![203, 204, 202, 201, 200, 500].includes(code)) {\n    throw new SimpleRestError(`Received unexpected HTTP status code ${code} in the initial response. This may indicate a server issue.`, code);\n  }\n\n  return false;\n}\nexport function isUnexpectedPollingResponse(rawResponse) {\n  const code = rawResponse.statusCode;\n\n  if (![202, 201, 200, 500].includes(code)) {\n    throw new SimpleRestError(`Received unexpected HTTP status code ${code} while polling. This may indicate a server issue.`, code);\n  }\n\n  return false;\n} //# sourceMappingURL=requestUtils.js.map","map":{"version":3,"sources":["F:/statvalu/project/AR_DocuExpert_Test/node_modules/@azure/core-lro/dist-esm/src/lroEngine/requestUtils.js"],"names":["getPollingUrl","rawResponse","defaultPath","_a","_b","_c","getAzureAsyncOperation","getLocation","getOperationLocation","headers","inferLroMode","requestPath","requestMethod","undefined","mode","resourceLocation","includes","SimpleRestError","Error","constructor","message","statusCode","name","Object","setPrototypeOf","prototype","isUnexpectedInitialResponse","code","isUnexpectedPollingResponse"],"mappings":"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","sourcesContent":["// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\n/**\n * Detects where the continuation token is and returns it. Notice that azure-asyncoperation\n * must be checked first before the other location headers because there are scenarios\n * where both azure-asyncoperation and location could be present in the same response but\n * azure-asyncoperation should be the one to use for polling.\n */\nexport function getPollingUrl(rawResponse, defaultPath) {\n    var _a, _b, _c;\n    return ((_c = (_b = (_a = getAzureAsyncOperation(rawResponse)) !== null && _a !== void 0 ? _a : getLocation(rawResponse)) !== null && _b !== void 0 ? _b : getOperationLocation(rawResponse)) !== null && _c !== void 0 ? _c : defaultPath);\n}\nfunction getLocation(rawResponse) {\n    return rawResponse.headers[\"location\"];\n}\nfunction getOperationLocation(rawResponse) {\n    return rawResponse.headers[\"operation-location\"];\n}\nfunction getAzureAsyncOperation(rawResponse) {\n    return rawResponse.headers[\"azure-asyncoperation\"];\n}\nexport function inferLroMode(requestPath, requestMethod, rawResponse) {\n    if (getAzureAsyncOperation(rawResponse) !== undefined) {\n        return {\n            mode: \"AzureAsync\",\n            resourceLocation: requestMethod === \"PUT\"\n                ? requestPath\n                : requestMethod === \"POST\"\n                    ? getLocation(rawResponse)\n                    : undefined\n        };\n    }\n    else if (getLocation(rawResponse) !== undefined ||\n        getOperationLocation(rawResponse) !== undefined) {\n        return {\n            mode: \"Location\"\n        };\n    }\n    else if ([\"PUT\", \"PATCH\"].includes(requestMethod)) {\n        return {\n            mode: \"Body\"\n        };\n    }\n    return {};\n}\nclass SimpleRestError extends Error {\n    constructor(message, statusCode) {\n        super(message);\n        this.name = \"RestError\";\n        this.statusCode = statusCode;\n        Object.setPrototypeOf(this, SimpleRestError.prototype);\n    }\n}\nexport function isUnexpectedInitialResponse(rawResponse) {\n    const code = rawResponse.statusCode;\n    if (![203, 204, 202, 201, 200, 500].includes(code)) {\n        throw new SimpleRestError(`Received unexpected HTTP status code ${code} in the initial response. This may indicate a server issue.`, code);\n    }\n    return false;\n}\nexport function isUnexpectedPollingResponse(rawResponse) {\n    const code = rawResponse.statusCode;\n    if (![202, 201, 200, 500].includes(code)) {\n        throw new SimpleRestError(`Received unexpected HTTP status code ${code} while polling. This may indicate a server issue.`, code);\n    }\n    return false;\n}\n//# sourceMappingURL=requestUtils.js.map"]},"metadata":{},"sourceType":"module"}